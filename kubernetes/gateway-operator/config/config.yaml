# Gateway Operator Configuration
# This file configures the gateway-operator behavior, including gateway deployment settings,
# reconciliation behavior, and logging.
#
# Configuration priority (highest to lowest):
# 1. Environment variables (e.g., GATEWAY_NAMESPACE)
# 2. This YAML file
# 3. Default values

# Gateway deployment configuration
gateway:
  # Helm chart reference (repository/chart-name)
  helm_chart_name: "oci://ghcr.io/your-org/gateway-helm-chart"
  
  # Chart version to deploy
  helm_chart_version: "0.1.0"
  
  # Path to values.yaml file for Helm chart
  # This file will be used as-is without templating
  # Can be overridden with GATEWAY_HELM_VALUES_FILE_PATH environment variable
  helm_values_file_path: "/config/gateway_values.yaml"
  
  # Allow insecure connections to OCI registries (skip TLS verification)
  # Note: This still uses HTTPS but skips certificate validation
  # Useful for development/testing with self-signed certificates
  # IMPORTANT: Should be false in production environments
  insecure_registry: false
  
  # Use plain HTTP instead of HTTPS for OCI registries
  # Useful for local/test registries without TLS support
  # IMPORTANT: Should be false in production environments  
  plain_http: false
    

# Reconciliation behavior configuration
reconciliation:
  # Minimum interval between reconciliation runs (duration string)
  # Example: "10m" for 10 minutes, or "300s" for 5 minutes
  # Can be overridden with env vars prefixed with GATEWAY_ (see docs)
  sync_period: "5m"

  # Max concurrent reconciles (must be >= 1)
  max_concurrent_reconciles: 1

  # Retry/backoff settings for deployments
  max_retry_attempts: 10
  initial_backoff: "1s"
  max_backoff_duration: "60s"

# Logging configuration
logging:
  # Log level (debug, info, warn, error)
  # Can be overridden with LOG_LEVEL environment variable
  level: "info"
  # Enable development mode (boolean). Replaces the previous `format` field.
  # Deprecated: Use format instead
  development: true
  # Log format: "json" or "text"
  # Default is "text" in development, "json" in production
  format: "text"
