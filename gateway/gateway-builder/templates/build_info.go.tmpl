/*
 * Copyright (c) 2025, WSO2 LLC. (https://www.wso2.com).
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

// Code generated by Gateway Builder. DO NOT EDIT.
package main

import (
	"fmt"
	"time"
)

// BuildInfo contains metadata about this build
type BuildInfo struct {
	Timestamp      time.Time
	BuilderVersion string
	Policies       []PolicyInfo
}

// PolicyInfo contains information about a compiled policy
type PolicyInfo struct {
	Name    string
	Version string
}

var (
	// BuildTimestamp is when this binary was built
	BuildTimestamp = "{{ .Timestamp }}"

	// BuilderVersion is the version of the builder that created this binary
	BuilderVersion = "{{ .BuilderVersion }}"

	// CompiledPolicies is the list of policies included in this binary
	CompiledPolicies = []PolicyInfo{
		{{- range .Policies }}
		{Name: "{{ .Name }}", Version: "{{ .Version }}"},
		{{- end }}
	}
)

// GetBuildInfo returns formatted build information
func GetBuildInfo() string {
	info := fmt.Sprintf("Policy Engine Build Information\n")
	info += fmt.Sprintf("================================\n")
	info += fmt.Sprintf("Build Time: %s\n", BuildTimestamp)
	info += fmt.Sprintf("Builder Version: %s\n", BuilderVersion)
	info += fmt.Sprintf("\nCompiled Policies (%d):\n", len(CompiledPolicies))
	for i, p := range CompiledPolicies {
		info += fmt.Sprintf("  %d. %s v%s\n", i+1, p.Name, p.Version)
	}
	return info
}
