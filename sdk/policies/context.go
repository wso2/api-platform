package policies

// RequestContext is mutable context for request phase containing current request state
type RequestContext struct {
	// Current request headers (mutable)
	// Updated in-place as policies execute
	// Key: header name (lowercase), Value: header values (array)
	Headers map[string][]string

	// Current request body (mutable)
	// nil if no body or body not required
	// Updated in-place by body-modifying policies
	Body []byte

	// Current request path (mutable)
	// Can be modified by routing policies
	Path string

	// Current request method (mutable)
	// Can be modified by transformation policies
	Method string

	// Unique request identifier for correlation
	// Generated by Kernel, immutable
	RequestID string

	// Shared metadata for inter-policy communication
	// References PolicyChain.Metadata (same instance)
	// Policies read/write this map to coordinate behavior
	Metadata map[string]interface{}
}

// ResponseContext is context for response phase containing request and response state
type ResponseContext struct {
	// Original request data (immutable, from request phase)
	RequestHeaders map[string][]string
	RequestBody    []byte
	RequestPath    string
	RequestMethod  string

	// Current response headers (mutable)
	// Updated in-place as policies execute
	ResponseHeaders map[string][]string

	// Current response body (mutable)
	// nil if no body or body not required
	ResponseBody []byte

	// Current response status code (mutable)
	ResponseStatus int

	// Request identifier (immutable, from request phase)
	RequestID string

	// Shared metadata from request phase (same reference)
	// Policies can read metadata set during request phase
	// References PolicyChain.Metadata (same instance as RequestContext)
	Metadata map[string]interface{}
}
